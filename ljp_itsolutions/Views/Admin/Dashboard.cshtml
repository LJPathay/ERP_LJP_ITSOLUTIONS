@{
    ViewData["Title"] = "Admin Dashboard";
    ViewBag.ModuleCount = 4;
}

<!-- Dashboard Content -->
<div class="container-fluid">
    <!-- Statistics Cards -->
    <div class="row g-4 mb-4">
        <div class="col-xl-3 col-md-6">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <p class="text-muted small mb-2">Total Users</p>
                        <h3 class="fw-bold mb-0">248</h3>
                        <div class="d-flex align-items-center gap-1 mt-2">
                            <i class="fas fa-arrow-up text-success small"></i>
                            <span class="text-success small fw-semibold">12%</span>
                            <span class="text-muted small">from last month</span>
                        </div>
                    </div>
                    <div class="stat-icon bg-amber-light">
                        <i class="fas fa-users text-amber"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <p class="text-muted small mb-2">Active Sessions</p>
                        <h3 class="fw-bold mb-0">84</h3>
                        <div class="d-flex align-items-center gap-1 mt-2">
                            <i class="fas fa-arrow-up text-success small"></i>
                            <span class="text-success small fw-semibold">8%</span>
                            <span class="text-muted small">from yesterday</span>
                        </div>
                    </div>
                    <div class="stat-icon bg-green-light">
                        <i class="fas fa-desktop text-success"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <p class="text-muted small mb-2">System Logs</p>
                        <h3 class="fw-bold mb-0">1,429</h3>
                        <div class="d-flex align-items-center gap-1 mt-2">
                            <i class="fas fa-minus text-muted small"></i>
                            <span class="text-muted small fw-semibold">No change</span>
                        </div>
                    </div>
                    <div class="stat-icon bg-blue-light">
                        <i class="fas fa-file-alt text-primary"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="stat-card">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <p class="text-muted small mb-2">Failed Logins</p>
                        <h3 class="fw-bold mb-0">12</h3>
                        <div class="d-flex align-items-center gap-1 mt-2">
                            <i class="fas fa-arrow-down text-danger small"></i>
                            <span class="text-danger small fw-semibold">3%</span>
                            <span class="text-muted small">from yesterday</span>
                        </div>
                    </div>
                    <div class="stat-icon bg-red-light">
                        <i class="fas fa-exclamation-triangle text-danger"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="row g-4 mb-4">
        <div class="col-lg-8">
            <div class="card-custom">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">User Activity Overview</h5>
                </div>
                <div class="card-body">
                    <canvas id="userActivityChart" height="80"></canvas>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card-custom">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">User Roles Distribution</h5>
                </div>
                <div class="card-body">
                    <canvas id="userRolesChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activities Table -->
    <div class="row">
        <div class="col-12">
            <div class="card-custom">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="fw-bold mb-0">Recent User Activities</h5>
                    <a href="@Url.Action("AuditLogs", "Admin")" class="btn btn-sm btn-amber">
                        View All Logs <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-custom mb-0">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Role</th>
                                    <th>Action</th>
                                    <th>IP Address</th>
                                    <th>Timestamp</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="user-avatar-sm bg-amber">
                                                <i class="fas fa-user text-white small"></i>
                                            </div>
                                            <span class="fw-semibold">John Doe</span>
                                        </div>
                                    </td>
                                    <td><span class="badge badge-amber">Admin</span></td>
                                    <td>Created new user</td>
                                    <td>192.168.1.100</td>
                                    <td>2024-01-31 10:30 AM</td>
                                    <td><span class="badge badge-success">Success</span></td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="user-avatar-sm bg-amber">
                                                <i class="fas fa-user text-white small"></i>
                                            </div>
                                            <span class="fw-semibold">Jane Smith</span>
                                        </div>
                                    </td>
                                    <td><span class="badge badge-amber">Manager</span></td>
                                    <td>Updated product inventory</td>
                                    <td>192.168.1.105</td>
                                    <td>2024-01-31 10:25 AM</td>
                                    <td><span class="badge badge-success">Success</span></td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="user-avatar-sm bg-amber">
                                                <i class="fas fa-user text-white small"></i>
                                            </div>
                                            <span class="fw-semibold">Mike Wilson</span>
                                        </div>
                                    </td>
                                    <td><span class="badge badge-amber">Cashier</span></td>
                                    <td>Processed payment</td>
                                    <td>192.168.1.110</td>
                                    <td>2024-01-31 10:20 AM</td>
                                    <td><span class="badge badge-success">Success</span></td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="user-avatar-sm bg-amber">
                                                <i class="fas fa-user text-white small"></i>
                                            </div>
                                            <span class="fw-semibold">Sarah Johnson</span>
                                        </div>
                                    </td>
                                    <td><span class="badge badge-amber">Marketing Staff</span></td>
                                    <td>Created promotion campaign</td>
                                    <td>192.168.1.115</td>
                                    <td>2024-01-31 10:15 AM</td>
                                    <td><span class="badge badge-success">Success</span></td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="user-avatar-sm bg-amber">
                                                <i class="fas fa-user text-white small"></i>
                                            </div>
                                            <span class="fw-semibold">Unknown User</span>
                                        </div>
                                    </td>
                                    <td><span class="badge badge-secondary">N/A</span></td>
                                    <td>Failed login attempt</td>
                                    <td>192.168.1.200</td>
                                    <td>2024-01-31 10:10 AM</td>
                                    <td><span class="badge badge-danger">Failed</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer bg-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="text-muted small">Showing 1 to 8 of 1,429 entries</span>
                        <nav>
                            <ul class="pagination pagination-sm mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#">Previous</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">...</a></li>
                                <li class="page-item"><a class="page-link" href="#">179</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">Next</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // User Activity Chart
        const ctx1 = document.getElementById('userActivityChart').getContext('2d');
        new Chart(ctx1, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Active Users',
                    data: [65, 78, 82, 95, 88, 72, 68],
                    borderColor: '#d97706',
                    backgroundColor: 'rgba(217, 119, 6, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { display: false }
                },
                scales: { y: { beginAtZero: true } }
            }
        });

        // User Roles Chart
        const ctx2 = document.getElementById('userRolesChart').getContext('2d');
        new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: ['Admin', 'Manager', 'Cashier', 'Marketing'],
                datasets: [{
                    data: [15, 35, 120, 78],
                    backgroundColor: ['#d97706','#f59e0b','#fbbf24','#fcd34d'],
                    borderWidth: 0
                }]
            },
            options: { responsive: true, maintainAspectRatio: true, plugins: { legend: { position: 'bottom' } } }
        });
    </script>
}
